# Manual endpoints for external services pointing to agentic cluster
# Services migrated to Traefik LB (port 80, Host header routing) where possible
# Remaining NodePorts: matrix(30167), langgraph(30800), kernow-hub(30456), backrest(31115), garage(30186)
---
apiVersion: v1
kind: Endpoints
metadata:
  name: matrix-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 30167
        protocol: TCP
---
apiVersion: v1
kind: Endpoints
metadata:
  name: langgraph-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 30800
        protocol: TCP
---
# Vikunja — routed via agentic Traefik LB (Host: vikunja.kernow.io)
apiVersion: v1
kind: Endpoints
metadata:
  name: vikunja-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 80
        protocol: TCP
---
# MCP Config Sync — routed via agentic Traefik LB (Host: mcp-webhook.kernow.io)
apiVersion: v1
kind: Endpoints
metadata:
  name: mcp-config-sync-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 80
        protocol: TCP
---
# Outline — routed via agentic Traefik LB (Host: outline.kernow.io)
apiVersion: v1
kind: Endpoints
metadata:
  name: outline-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 80
        protocol: TCP
---
# Backrest backup management UI (agentic cluster)
apiVersion: v1
kind: Endpoints
metadata:
  name: backrest-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 31115
        protocol: TCP
---
# Garage S3 storage web UI (TrueNAS-HDD)
apiVersion: v1
kind: Endpoints
metadata:
  name: garage-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.10.0.103
    ports:
      - name: http
        port: 30186
        protocol: TCP
---
# Silver Bullet — routed via agentic Traefik LB (Host: silverbullet.kernow.io)
apiVersion: v1
kind: Endpoints
metadata:
  name: silverbullet-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 80
        protocol: TCP
---
# Kernow Hub unified PWA (agentic cluster)
apiVersion: v1
kind: Endpoints
metadata:
  name: kernow-hub-external
  namespace: apps
subsets:
  - addresses:
      - ip: 10.20.0.40
    ports:
      - name: http
        port: 30456
        protocol: TCP
