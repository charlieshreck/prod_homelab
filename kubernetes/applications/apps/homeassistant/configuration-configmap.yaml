apiVersion: v1
kind: ConfigMap
metadata:
  name: homeassistant-configuration
  namespace: apps
data:
  configuration.yaml: |
    # Loads default set of integrations. Do not remove.
    default_config:

    # Home Assistant configuration
    homeassistant:
      external_url: https://homeassistant.kernow.io
      internal_url: http://homeassistant.apps.svc.cluster.local:8123

    # HTTP Configuration
    http:
      use_x_forwarded_for: true
      trusted_proxies:
        - 10.244.0.0/16

    # Matter Server Integration
    matter:
      url: ws://matter-server.apps.svc.cluster.local:5580/ws
      # Enable bridge mode - exposes ALL HA entities as Matter devices to Google Home
      filter:
        include_domains:
          - light
          - switch
          - climate
          - lock
          - cover
          - fan
          - binary_sensor
          - sensor
          - media_player
          - camera
          - vacuum
          - humidifier
          - alarm_control_panel
          - number
          - select
          - button

    # Text to speech
    tts:
      - platform: google_translate

    automation: !include automations.yaml
    script: !include scripts.yaml
    scene: !include scenes.yaml
